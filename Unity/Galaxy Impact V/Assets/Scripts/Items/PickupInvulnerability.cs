using UnityEngine;

public class PickupInvulnerability : PickupBase
{
    [Header("Invulnerability")]
    [SerializeField] private float duration = 4f;
    [SerializeField] private Sprite icon;

    protected override void OnPickup(Collider2D player)
    {
        var bm = player.GetComponent<BuffManager>() ?? player.gameObject.AddComponent<BuffManager>();
        var hp = player.GetComponent<Health>();
        if (hp == null) return;

        bm.AddOrRefresh(
            id: "Invulnerability",
            duration: duration,
            onApply: () => hp.SetInvulnerable(true),
            onRemove: () => hp.SetInvulnerable(false),
            icon: icon
        );
    }
}
